{
  "issue": {
    "url": "https://api.github.com/repos/psf/requests/issues/6777",
    "repository_url": "https://api.github.com/repos/psf/requests",
    "labels_url": "https://api.github.com/repos/psf/requests/issues/6777/labels{/name}",
    "comments_url": "https://api.github.com/repos/psf/requests/issues/6777/comments",
    "events_url": "https://api.github.com/repos/psf/requests/issues/6777/events",
    "html_url": "https://github.com/psf/requests/issues/6777",
    "id": 2439802444,
    "node_id": "I_kwDOABTKOs6RbG5M",
    "number": 6777,
    "title": "What should be Overwritten to ignore all verification in a custom adapter? ",
    "user": {
      "login": "achapkowski",
      "id": 5131271,
      "node_id": "MDQ6VXNlcjUxMzEyNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5131271?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achapkowski",
      "html_url": "https://github.com/achapkowski",
      "followers_url": "https://api.github.com/users/achapkowski/followers",
      "following_url": "https://api.github.com/users/achapkowski/following{/other_user}",
      "gists_url": "https://api.github.com/users/achapkowski/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achapkowski/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achapkowski/subscriptions",
      "organizations_url": "https://api.github.com/users/achapkowski/orgs",
      "repos_url": "https://api.github.com/users/achapkowski/repos",
      "events_url": "https://api.github.com/users/achapkowski/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achapkowski/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2024-07-31T11:21:38Z",
    "updated_at": "2024-07-31T18:11:39Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "Hello,\r\n\r\nI wish to use a custom adapter that I can use to access servers with old and expired certificates so I can automate the updating of the SSL certs.  The doc isn't really clear, so I consider this a bug. \r\n\r\nI have the following:\r\n\r\n```\r\n###########################################################################\r\nclass TruststoreAdapter(HTTPAdapter):\r\n    \"\"\"An adapter for requests.  This supplies the a custom ssl_context to a set of requests.\"\"\"\r\n\r\n    custom_context: truststore.SSLContext | ssl.SSLContext = None\r\n\r\n    def __init__(\r\n        self,\r\n        pool_connections=DEFAULT_POOLSIZE,\r\n        pool_maxsize=DEFAULT_POOLSIZE,\r\n        max_retries=DEFAULT_RETRIES,\r\n        pool_block=DEFAULT_POOLBLOCK,\r\n        ssl_context: truststore.SSLContext | ssl.SSLContext | None = None,\r\n    ):\r\n        self.custom_context = ssl_context\r\n\r\n        super().__init__(\r\n            pool_connections=pool_connections,\r\n            pool_maxsize=pool_maxsize,\r\n            max_retries=max_retries,\r\n            pool_block=pool_block,\r\n        )\r\n\r\n    # ---------------------------------------------------------------------\r\n    def __str__(self) -> str:\r\n        return f\"< {self.__class__.__name__} >\"\r\n\r\n    # ---------------------------------------------------------------------\r\n    def __repr__(self) -> str:\r\n        return f\"< {self.__class__.__name__} >\"\r\n\r\n    # ---------------------------------------------------------------------\r\n    def init_poolmanager(self, connections, maxsize, block=False):\r\n        ctx = self.custom_context\r\n        return super().init_poolmanager(connections, maxsize, block, ssl_context=ctx)\r\n```\r\n\r\nWhere the SSL Context is defined as:\r\n\r\n```\r\nssl_context: truststore.SSLContext = truststore.SSLContext()\r\nssl_context.check_hostname = False\r\nssl_context.verify_mode = 0 # No check\r\n```\r\n\r\n",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/psf/requests/issues/6777/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/psf/requests/issues/6777/timeline",
    "performed_via_github_app": null,
    "state_reason": null
  },
  "comments": [
    {
      "url": "https://api.github.com/repos/psf/requests/issues/comments/2261040905",
      "html_url": "https://github.com/psf/requests/issues/6777#issuecomment-2261040905",
      "issue_url": "https://api.github.com/repos/psf/requests/issues/6777",
      "id": 2261040905,
      "node_id": "IC_kwDOABTKOs6GxL8J",
      "user": {
        "login": "nateprewitt",
        "id": 5271761,
        "node_id": "MDQ6VXNlcjUyNzE3NjE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5271761?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/nateprewitt",
        "html_url": "https://github.com/nateprewitt",
        "followers_url": "https://api.github.com/users/nateprewitt/followers",
        "following_url": "https://api.github.com/users/nateprewitt/following{/other_user}",
        "gists_url": "https://api.github.com/users/nateprewitt/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/nateprewitt/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/nateprewitt/subscriptions",
        "organizations_url": "https://api.github.com/users/nateprewitt/orgs",
        "repos_url": "https://api.github.com/users/nateprewitt/repos",
        "events_url": "https://api.github.com/users/nateprewitt/events{/privacy}",
        "received_events_url": "https://api.github.com/users/nateprewitt/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2024-07-31T17:45:27Z",
      "updated_at": "2024-07-31T17:45:27Z",
      "author_association": "MEMBER",
      "body": "Hi @achapkowski, could you clarify what exactly you'd be looking for in the Requests documentation? We cover what the Adapter intent is at a high-level, what the end user chooses to modify is very open-ended. `urllib3` provides [docs](https://urllib3.readthedocs.io/en/stable/advanced-usage.html#custom-ssl-contexts) on how to provide a custom SSLContext to their Poolmanager which seems to be the change you're trying to make.",
      "reactions": {
        "url": "https://api.github.com/repos/psf/requests/issues/comments/2261040905/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "performed_via_github_app": null
    },
    {
      "url": "https://api.github.com/repos/psf/requests/issues/comments/2261112290",
      "html_url": "https://github.com/psf/requests/issues/6777#issuecomment-2261112290",
      "issue_url": "https://api.github.com/repos/psf/requests/issues/6777",
      "id": 2261112290,
      "node_id": "IC_kwDOABTKOs6GxdXi",
      "user": {
        "login": "achapkowski",
        "id": 5131271,
        "node_id": "MDQ6VXNlcjUxMzEyNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5131271?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achapkowski",
        "html_url": "https://github.com/achapkowski",
        "followers_url": "https://api.github.com/users/achapkowski/followers",
        "following_url": "https://api.github.com/users/achapkowski/following{/other_user}",
        "gists_url": "https://api.github.com/users/achapkowski/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/achapkowski/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/achapkowski/subscriptions",
        "organizations_url": "https://api.github.com/users/achapkowski/orgs",
        "repos_url": "https://api.github.com/users/achapkowski/repos",
        "events_url": "https://api.github.com/users/achapkowski/events{/privacy}",
        "received_events_url": "https://api.github.com/users/achapkowski/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2024-07-31T18:11:38Z",
      "updated_at": "2024-07-31T18:11:38Z",
      "author_association": "NONE",
      "body": "@nateprewitt I'll check out this doc and get back in a few.  If my answer is there I will close this.\r\n\r\nWhat I am seeing is that if the common name of an SSL certificate has a mismatch, and exception when you provide a custom SSLContext object in the above http adapter.   So I was wondering if some other setting needs to be set to not verify common names. ",
      "reactions": {
        "url": "https://api.github.com/repos/psf/requests/issues/comments/2261112290/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
      },
      "performed_via_github_app": null
    }
  ]
}